<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>DoesHeLove.me - Find Out If He Loves You | Petal Game</title>

<!-- SEO Meta Tags -->
<meta name="description" content="Does he love you? Pluck the petals and find out! A fun, interactive flower petal game to answer the age-old question: loves me or loves me not?">
<meta name="keywords" content="does he love me, love game, petal game, loves me loves me not, relationship game, flower petals, love fortune">
<meta name="author" content="DoesHeLove.me">
<meta name="robots" content="index, follow">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://doeshelove.me/">
<meta property="og:title" content="DoesHeLove.me - Find Out If He Loves You">
<meta property="og:description" content="Pluck the petals and discover the answer! A fun interactive game based on the classic loves me, loves me not tradition.">
<meta property="og:image" content="https://doeshelove.me/preview.png">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://doeshelove.me/">
<meta property="twitter:title" content="DoesHeLove.me - Find Out If He Loves You">
<meta property="twitter:description" content="Pluck the petals and discover the answer! A fun interactive game based on the classic loves me, loves me not tradition.">
<meta property="twitter:image" content="https://doeshelove.me/preview.png">

<!-- Canonical URL -->
<link rel="canonical" href="https://doeshelove.me/">

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "DoesHeLove.me",
  "url": "https://doeshelove.me",
  "description": "Interactive flower petal game to answer the question: does he love me?",
  "applicationCategory": "GameApplication",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  }
}
</script>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400&display=swap" rel="stylesheet"/>
<style>
  :root {
    --pink: #e84393;
    --deep-pink: #c44569;
    --cream: #fdf6f0;
    --deep-green: #00b894;
    --gold: #fdcb6e;
    --text: #2d3436;
    --petal-light: #ff7675;
    --petal-mid: #e84393;
    --petal-dark: #c44569;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    min-height: 100vh;
    background: var(--cream);
    font-family: 'Lato', sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow-x: hidden;
    overflow-y: auto;
    position: relative;
    padding: 40px 0;
  }

  /* Background blobs */
  .bg-blob {
    position: fixed;
    border-radius: 50%;
    filter: blur(100px);
    opacity: 0.35;
    pointer-events: none;
    z-index: 0;
  }
  .bg-blob.b1 { width: 300px; height: 300px; background: #fd79a8; top: -80px; left: -80px; }
  .bg-blob.b2 { width: 220px; height: 220px; background: #a29bfe; bottom: -60px; right: -60px; }
  .bg-blob.b3 { width: 180px; height: 180px; background: #fdcb6e; top: 50%; left: 60%; }

  /* Ambient falling petals */
  .ambient-petal {
    position: fixed;
    width: 14px;
    height: 22px;
    background: linear-gradient(170deg, var(--petal-light), var(--petal-mid));
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    opacity: 0;
    pointer-events: none;
    z-index: 0;
    animation: ambientFall linear infinite;
  }
  @keyframes ambientFall {
    0%   { transform: translateY(-40px) rotate(0deg); opacity: 0; }
    10%  { opacity: 0.5; }
    90%  { opacity: 0.3; }
    100% { transform: translateY(105vh) rotate(720deg); opacity: 0; }
  }

  /* Title */
  .title {
    position: relative;
    z-index: 2;
    font-family: 'Playfair Display', serif;
    font-size: 2rem;
    color: var(--text);
    margin-bottom: 4px;
    text-align: center;
    letter-spacing: 1px;
  }
  .title span { color: var(--pink); font-style: italic; }

  .subtitle {
    position: relative;
    z-index: 2;
    color: #636e72;
    font-size: 0.8rem;
    font-weight: 300;
    margin-bottom: 10px;
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  /* Color picker */
  .color-picker {
    position: relative;
    z-index: 2;
    display: flex;
    gap: 10px;
    margin-bottom: 48px;
  }
  .color-swatch {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    border: 2.5px solid transparent;
    cursor: pointer;
    transition: border-color 0.2s, transform 0.2s;
  }
  .color-swatch:hover { transform: scale(1.15); }
  .color-swatch.active { border-color: var(--text); }

  /* Flower */
  .flower-wrap {
    position: relative;
    z-index: 2;
    width: 220px;
    height: 220px;
  }
  .flower {
    position: relative;
    width: 220px;
    height: 220px;
  }

  /* Petals */
  .petal {
    position: absolute;
    z-index: 2;
    width: 60px;
    height: 95px;
    background: linear-gradient(170deg, var(--petal-light) 0%, var(--petal-mid) 50%, var(--petal-dark) 100%);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    top: 50%; left: 50%;
    transform-origin: 50% 100%;
    cursor: pointer;
    transition: filter 0.2s;
    filter: drop-shadow(0 2px 6px rgba(200,68,105,0.3));
    user-select: none;
    -webkit-user-select: none;
  }
  .petal:hover { filter: drop-shadow(0 4px 12px rgba(200,68,105,0.55)) brightness(1.1); }
  .petal.plucked { pointer-events: none; }

  /* Shake on tap */
  @keyframes shake {
    0%   { filter: brightness(1); }
    25%  { filter: brightness(1.25); }
    50%  { filter: brightness(0.85); }
    75%  { filter: brightness(1.2); }
    100% { filter: brightness(1); }
  }
  .petal.shaking { animation: shake 0.25s ease forwards; }

  /* Petal fall */
  @keyframes petalFall {
    0%   { opacity: 1; transform: translate(0,0) rotate(0deg) scale(1); }
    30%  { opacity: 1; }
    70%  { opacity: 0.6; }
    100% { opacity: 0; transform: translate(var(--dx), 240px) rotate(var(--rot)) scale(0.4); }
  }
  .petal.falling { animation: petalFall 1.2s cubic-bezier(.25,.46,.45,.94) forwards; }

  /* Flower center */
  .flower-center {
    position: absolute;
    width: 44px; height: 44px;
    background: radial-gradient(circle at 40% 40%, var(--gold), #e17055);
    border-radius: 50%;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    z-index: 3;
    box-shadow: 0 3px 12px rgba(225,112,85,0.4);
  }

  /* Stem */
  .stem {
    position: absolute;
    bottom: -100px; left: 50%;
    transform: translateX(-50%);
    width: 7px; height: 102px;
    background: linear-gradient(to bottom, var(--deep-green), #27ae60);
    border-radius: 4px;
    z-index: 0;
  }
  .stem::after {
    content: '';
    position: absolute;
    width: 24px; height: 16px;
    background: var(--deep-green);
    border-radius: 50% 50% 0 50%;
    top: 42px; left: 4px;
    transform: rotate(30deg);
  }

  /* Counter */
  .counter {
    position: relative;
    z-index: 2;
    margin-top: 30px;
    font-size: 0.78rem;
    color: #636e72;
    letter-spacing: 1.5px;
    text-transform: uppercase;
  }
  .counter span { color: var(--pink); font-weight: 700; }

  /* Result */
  .result {
    position: relative;
    z-index: 2;
    margin-top: 12px;
    font-family: 'Playfair Display', serif;
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--text);
    text-align: center;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.4s;
  }
  .result.visible { opacity: 1; }
  .result .loves { color: var(--pink); }
  .result .not   { color: #636e72; }

  /* Restart button */
  .restart-btn {
    position: relative;
    z-index: 2;
    margin-top: 14px;
    padding: 9px 26px;
    border: 2px solid var(--pink);
    background: transparent;
    color: var(--pink);
    font-family: 'Playfair Display', serif;
    font-size: 0.9rem;
    border-radius: 30px;
    cursor: pointer;
    letter-spacing: 1px;
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s;
  }
  .restart-btn.visible { opacity: 1; pointer-events: auto; }
  .restart-btn:hover { background: var(--pink); color: #fff; }

  /* Instruction */
  @keyframes pulse { 0%,100%{opacity:0.7} 50%{opacity:1} }
  .instruction {
    position: relative;
    z-index: 2;
    margin-top: 8px;
    color: #636e72;
    font-size: 0.75rem;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    animation: pulse 2s ease infinite;
  }

  /* History log */
  .history {
    position: relative;
    z-index: 2;
    margin-top: 22px;
    width: 90%;
    max-width: 280px;
    max-height: 90px;
    overflow-y: auto;
    text-align: center;
  }
  .history-item {
    font-size: 0.72rem;
    color: #636e72;
    letter-spacing: 0.5px;
    padding: 2px 0;
    opacity: 0.7;
  }
  .history-item .h-loves { color: var(--pink); font-weight: 700; }
  .history-item .h-not   { color: #636e72; font-weight: 700; }

  /* Confetti / hearts burst */
  .burst-particle {
    position: fixed;
    pointer-events: none;
    z-index: 100;
    font-size: 1.4rem;
    animation: burstFly 1s cubic-bezier(.25,.46,.45,.94) forwards;
  }
  @keyframes burstFly {
    0%   { opacity: 1; transform: translate(0,0) scale(1); }
    60%  { opacity: 1; }
    100% { opacity: 0; transform: translate(var(--bx), var(--by)) scale(0.3); }
  }

  /* Hide scrollbar for history */
  .history::-webkit-scrollbar { display: none; }
  .history { -ms-overflow-style: none; scrollbar-width: none; }

  /* SEO Content Section */
  .seo-content {
    position: relative;
    z-index: 2;
    max-width: 600px;
    margin: 50px auto 30px;
    padding: 0 20px;
    text-align: left;
    color: var(--text);
    line-height: 1.7;
  }
  .seo-content h2 {
    font-family: 'Playfair Display', serif;
    font-size: 1.5rem;
    color: var(--pink);
    margin-bottom: 16px;
    text-align: center;
  }
  .seo-content h3 {
    font-family: 'Playfair Display', serif;
    font-size: 1.2rem;
    color: var(--text);
    margin-top: 24px;
    margin-bottom: 10px;
  }
  .seo-content p {
    font-size: 0.95rem;
    color: #636e72;
    margin-bottom: 14px;
  }
</style>
</head>
<body>

<div class="bg-blob b1"></div>
<div class="bg-blob b2"></div>
<div class="bg-blob b3"></div>

<div id="ambientPetals"></div>

<h1 class="title">Does He <span>Love Me?</span></h1>
<p class="subtitle">A petal's promise</p>

<div class="color-picker" id="colorPicker"></div>

<div class="flower-wrap">
  <div class="flower" id="flower">
    <div class="flower-center"></div>
    <div class="stem"></div>
  </div>
</div>

<div class="counter" id="counter"><span id="petalNum">8</span> petals left</div>
<div class="result" id="result"></div>
<button class="restart-btn" id="restartBtn" onclick="init()">ðŸŒ¸ Try Again</button>
<p class="instruction" id="instruction">Tap a petal to begin</p>
<div class="history" id="history"></div>

<!-- SEO Content Section -->
<div class="seo-content">
  <h2>Does He Love Me? Find Out With Our Petal Game</h2>
  <p>Remember the classic tradition of plucking flower petals while asking "loves me, loves me not"? Now you can play this timeless love game online! Our interactive petal picker helps you discover the answer to that age-old question: does he love you?</p>
  
  <h3>How to Play</h3>
  <p>Simply tap on any petal to pluck it from the flower. With each petal you pick, the answer alternates between "loves me" and "loves me not." Keep plucking until all petals are gone to reveal your final romantic fortune. You can also choose from different flower colors to match your mood!</p>
  
  <h3>Share Your Results</h3>
  <p>Got a fun result? Share doeshelove.me with your friends and see what answer they get. Will the petals say he loves you, or loves you not? There's only one way to find out!</p>
</div>

<script>
(function(){
  const PETAL_COUNT = 8;
  let petalsLeft = 0;
  let currentAnswer = '';
  let historyLog = [];
  let isFirstTry = true; // Track if this is the first ever try

  // --- Color themes ---
  const COLORS = [
    { name:'Pink',   light:'#ff7675', mid:'#e84393', dark:'#c44569' },
    { name:'Red',    light:'#fd9644', mid:'#e55039', dark:'#c0392b' },
    { name:'Purple', light:'#a29bfe', mid:'#6c5ce7', dark:'#5f27cd' },
    { name:'Yellow', light:'#ffeaa7', mid:'#fdcb6e', dark:'#e17055' },
    { name:'Teal',   light:'#81ecec', mid:'#00cec9', dark:'#00b894' }
  ];
  let activeColor = 0;

  // --- Audio ---
  let audioCtx = null;
  function initAudio() {
    if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }
  function playPluck() {
    initAudio();
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.connect(gain);
    gain.connect(audioCtx.destination);
    osc.type = 'sine';
    osc.frequency.setValueAtTime(600, audioCtx.currentTime);
    osc.frequency.exponentialRampToValueAtTime(200, audioCtx.currentTime + 0.3);
    gain.gain.setValueAtTime(0.25, audioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + 0.4);
    osc.start(audioCtx.currentTime);
    osc.stop(audioCtx.currentTime + 0.4);
  }

  // --- Ambient petals ---
  function spawnAmbientPetals() {
    const container = document.getElementById('ambientPetals');
    for (let i = 0; i < 12; i++) {
      const p = document.createElement('div');
      p.className = 'ambient-petal';
      p.style.left = (Math.random() * 100) + 'vw';
      p.style.animationDuration = (6 + Math.random() * 8) + 's';
      p.style.animationDelay = (Math.random() * 8) + 's';
      p.style.width = (10 + Math.random() * 12) + 'px';
      p.style.height = (16 + Math.random() * 14) + 'px';
      container.appendChild(p);
    }
  }

  // --- Color Picker ---
  function buildColorPicker() {
    const picker = document.getElementById('colorPicker');
    COLORS.forEach((c, i) => {
      const swatch = document.createElement('div');
      swatch.className = 'color-swatch' + (i === 0 ? ' active' : '');
      swatch.style.background = c.mid;
      swatch.addEventListener('click', () => {
        document.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('active'));
        swatch.classList.add('active');
        activeColor = i;
        applyColor(c);
        init();
      });
      picker.appendChild(swatch);
    });
  }
  function applyColor(c) {
    document.documentElement.style.setProperty('--petal-light', c.light);
    document.documentElement.style.setProperty('--petal-mid',   c.mid);
    document.documentElement.style.setProperty('--petal-dark',  c.dark);
    document.documentElement.style.setProperty('--pink',        c.mid);
    document.querySelectorAll('.ambient-petal').forEach(p => {
      p.style.background = `linear-gradient(170deg, ${c.light}, ${c.mid})`;
    });
  }

  // --- Hearts / confetti burst ---
  function fireBurst() {
    const cx = window.innerWidth / 2;
    const cy = window.innerHeight / 2;
    const emojis = ['ðŸ’•','ðŸ’–','ðŸ’—','ðŸ’“','âœ¨','ðŸ’«','ðŸŒ¸'];
    for (let i = 0; i < 18; i++) {
      const el = document.createElement('div');
      el.className = 'burst-particle';
      el.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      el.style.left = cx + 'px';
      el.style.top  = cy + 'px';
      const angle = Math.random() * Math.PI * 2;
      const dist  = 80 + Math.random() * 140;
      el.style.setProperty('--bx', (Math.cos(angle) * dist) + 'px');
      el.style.setProperty('--by', (Math.sin(angle) * dist) + 'px');
      el.style.animationDuration = (0.7 + Math.random() * 0.5) + 's';
      document.body.appendChild(el);
      setTimeout(() => el.remove(), 1300);
    }
  }

  // --- Init flower ---
  function init() {
    const flower = document.getElementById('flower');
    flower.querySelectorAll('.petal').forEach(p => p.remove());

    const result = document.getElementById('result');
    result.innerHTML = '';
    result.classList.remove('visible');

    document.getElementById('restartBtn').classList.remove('visible');
    document.getElementById('instruction').style.display = 'block';

    petalsLeft = PETAL_COUNT;
    // RIGGED: First try always ends on "Loves Me!"
    // With 8 petals, starting at "loves" means final answer is "loves"
    if (isFirstTry) {
      currentAnswer = 'loves'; // This ensures it ends on "loves"
    } else {
      currentAnswer = Math.random() < 0.5 ? 'loves' : 'not';
    }

    updateCounter();

    const c = COLORS[activeColor];
    for (let i = 0; i < PETAL_COUNT; i++) {
      const petal = document.createElement('div');
      petal.className = 'petal';
      petal.style.background = `linear-gradient(170deg, ${c.light} 0%, ${c.mid} 50%, ${c.dark} 100%)`;

      const angleDeg = (360 / PETAL_COUNT) * i - 90;
      const angleRad = angleDeg * (Math.PI / 180);
      const cx = 110, cy = 110;
      const dist = 56;
      const px = cx + Math.cos(angleRad) * dist - 30;
      const py = cy + Math.sin(angleRad) * dist - 95;

      petal.style.left = px + 'px';
      petal.style.top  = py + 'px';
      petal.style.transform = `rotate(${angleDeg + 90}deg)`;

      petal.addEventListener('click', () => pluckPetal(petal));
      flower.insertBefore(petal, flower.firstChild);
    }
  }

  function updateCounter() {
    document.getElementById('petalNum').textContent = petalsLeft;
  }

  // --- Pluck a petal ---
  function pluckPetal(petal) {
    if (petal.classList.contains('plucked')) return;
    petal.classList.add('plucked');
    playPluck();

    // Shake then fall
    petal.classList.add('shaking');
    setTimeout(() => {
      petal.classList.remove('shaking');
      petal.classList.add('falling');
      const dx = (Math.random() - 0.5) * 200;
      const rot = (Math.random() - 0.5) * 360;
      petal.style.setProperty('--dx', dx + 'px');
      petal.style.setProperty('--rot', rot + 'deg');
    }, 250);

    // Flip answer
    currentAnswer = currentAnswer === 'loves' ? 'not' : 'loves';
    petalsLeft--;
    updateCounter();
    showRunning();

    if (petalsLeft === 0) {
      setTimeout(() => showResult(), 1000);
    }
  }

  function showRunning() {
    const result = document.getElementById('result');
    result.innerHTML = currentAnswer === 'loves'
      ? '<span class="loves">Loves meâ€¦</span>'
      : '<span class="not">Loves me notâ€¦</span>';
    result.classList.add('visible');
  }

  function showResult() {
    document.getElementById('instruction').style.display = 'none';
    const result = document.getElementById('result');
    const isLoves = currentAnswer === 'loves';

    if (isLoves) {
      result.innerHTML = 'ðŸ’• <span class="loves">Loves Me!</span>';
      fireBurst();
    } else {
      result.innerHTML = 'ðŸ’” <span class="not">Loves Me Not</span>';
    }
    result.classList.add('visible');
    document.getElementById('restartBtn').classList.add('visible');

    historyLog.unshift(isLoves ? 'Loves Me!' : 'Loves Me Not');
    renderHistory();
    
    // After first try, make it random
    isFirstTry = false;
  }

  function renderHistory() {
    const el = document.getElementById('history');
    el.innerHTML = historyLog.map((entry, i) => {
      const cls = entry === 'Loves Me!' ? 'h-loves' : 'h-not';
      return `<div class="history-item">#${historyLog.length - i} â€” <span class="${cls}">${entry}</span></div>`;
    }).join('');
  }

  // --- Start ---
  buildColorPicker();
  spawnAmbientPetals();
  applyColor(COLORS[0]);
  init();
  window.init = init;
})();
</script>
</body>
</html>
